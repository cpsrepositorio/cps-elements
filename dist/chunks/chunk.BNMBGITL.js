import{c as a}from"./chunk.K3RV6SX6.js";function h(t){let e=t.tagName.toLowerCase();return t.getAttribute("tabindex")==="-1"||t.hasAttribute("disabled")||t.hasAttribute("aria-disabled")&&t.getAttribute("aria-disabled")!=="false"||e==="input"&&t.getAttribute("type")==="radio"&&!t.hasAttribute("checked")||t.offsetParent===null||window.getComputedStyle(t).visibility==="hidden"?!1:(e==="audio"||e==="video")&&t.hasAttribute("controls")||t.hasAttribute("tabindex")||t.hasAttribute("contenteditable")&&t.getAttribute("contenteditable")!=="false"?!0:["button","input","select","textarea","a","audio","video","summary"].includes(e)}a(h,"isTabbable");function c(t){var d,u;let e=[];function s(n){n instanceof HTMLElement&&(e.push(n),n.shadowRoot!==null&&n.shadowRoot.mode==="open"&&s(n.shadowRoot)),[...n.children].forEach(f=>s(f))}a(s,"walk"),s(t);let i=(d=e.find(n=>h(n)))!=null?d:null,l=(u=e.reverse().find(n=>h(n)))!=null?u:null;return{start:i,end:l}}a(c,"getTabbableBoundary");var o=[],r=class{constructor(e){this.tabDirection="forward";this.element=e,this.handleFocusIn=this.handleFocusIn.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this)}activate(){o.push(this.element),document.addEventListener("focusin",this.handleFocusIn),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}deactivate(){o=o.filter(e=>e!==this.element),document.removeEventListener("focusin",this.handleFocusIn),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}isActive(){return o[o.length-1]===this.element}checkFocus(){if(this.isActive()&&!this.element.matches(":focus-within")){let{start:e,end:s}=c(this.element),i=this.tabDirection==="forward"?e:s;typeof(i==null?void 0:i.focus)=="function"&&i.focus({preventScroll:!0})}}handleFocusIn(){this.checkFocus()}handleKeyDown(e){e.key==="Tab"&&e.shiftKey&&(this.tabDirection="backward",requestAnimationFrame(()=>this.checkFocus()))}handleKeyUp(){this.tabDirection="forward"}};a(r,"Modal");export{r as a};
