import{a as f,b as r}from"./chunk.OUFELDHB.js";import{b as d}from"./chunk.KBGGAJDF.js";import{a as u,b as n,c as s,e as h}from"./chunk.5NKACAGP.js";import{a as c}from"./chunk.D7J5WK6X.js";import{c as m,e as t}from"./chunk.K3RV6SX6.js";var e=class extends h{constructor(){super(...arguments);this.localize=new d(this);this.isoTime="";this.relativeTime="";this.titleTime="";this.date=new Date;this.format="long";this.numeric=!1;this.sync=!1}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.updateTimeout)}render(){let p=new Date,o=new Date(this.date);if(isNaN(o.getMilliseconds()))return this.relativeTime="",this.isoTime="","";let l=o.getTime()-p.getTime(),{unit:a,value:T}=f.find(i=>Math.abs(l)<i.max);if(this.isoTime=o.toISOString(),this.titleTime=this.localize.date(o,{month:"long",year:"numeric",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"}),this.relativeTime=this.localize.relativeTime(Math.round(l/T),a,{numeric:this.numeric?"always":"auto",style:this.format}),clearTimeout(this.updateTimeout),this.sync){let i;a==="minute"?i=r("second"):a==="hour"?i=r("minute"):a==="day"?i=r("hour"):i=r("day"),this.updateTimeout=window.setTimeout(()=>this.requestUpdate(),i)}return c` <time datetime=${this.isoTime} title=${this.titleTime}>${this.relativeTime}</time> `}};m(e,"CpsFormatRelativeTime"),t([s()],e.prototype,"isoTime",2),t([s()],e.prototype,"relativeTime",2),t([s()],e.prototype,"titleTime",2),t([n()],e.prototype,"date",2),t([n()],e.prototype,"format",2),t([n({type:Boolean})],e.prototype,"numeric",2),t([n({type:Boolean})],e.prototype,"sync",2),e=t([u("cps-format-relative-time")],e);export{e as a};
