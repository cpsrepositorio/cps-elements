import{a as h}from"./chunk.ZZGV7AUG.js";import{a as p}from"./chunk.I4SLWRO6.js";import{a as n}from"./chunk.PJ4GMTJV.js";import{a as l,b as i,e as m}from"./chunk.63GKG2X6.js";import{a as c}from"./chunk.FHLVZWAU.js";import{c as a,d as o}from"./chunk.V5GSCVDY.js";var t=class extends m{constructor(){super(...arguments);this.mode="cors";this.allowScripts=!1}executeScript(e){let r=document.createElement("script");[...e.attributes].forEach(s=>r.setAttribute(s.name,s.value)),r.textContent=e.textContent,e.parentNode.replaceChild(r,e)}async handleSrcChange(){try{let e=this.src,r=await n(e,this.mode);if(e!==this.src)return;if(!r.ok){this.emit("cps-error",{detail:{status:r.status}});return}this.innerHTML=r.html,this.allowScripts&&[...this.querySelectorAll("script")].forEach(s=>this.executeScript(s)),this.emit("cps-load")}catch(e){this.emit("cps-error",{detail:{status:-1}})}}render(){return c`<slot></slot>`}};a(t,"CpsInclude"),t.styles=h,o([i()],t.prototype,"src",2),o([i()],t.prototype,"mode",2),o([i({attribute:"allow-scripts",type:Boolean})],t.prototype,"allowScripts",2),o([p("src")],t.prototype,"handleSrcChange",1),t=o([l("cps-include")],t);export{t as a};
